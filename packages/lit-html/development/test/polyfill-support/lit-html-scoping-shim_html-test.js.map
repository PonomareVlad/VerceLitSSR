{"version":3,"file":"lit-html-scoping-shim_html-test.js","sourceRoot":"","sources":["../../../src/test/polyfill-support/lit-html-scoping-shim_html-test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport '../../polyfill-support.js';\nimport {renderShadowRoot} from '../test-utils/shadow-root.js';\nimport {html} from '../../lit-html.js';\nimport {assert} from '@esm-bundle/chai';\n\nconst extraGlobals = window as LitExtraGlobals;\n\nsuite('ShadyCSS scoping shim', () => {\n  setup(function () {\n    if (\n      typeof extraGlobals.ShadyDOM === 'undefined' ||\n      !extraGlobals.ShadyDOM.inUse ||\n      typeof extraGlobals.ShadyCSS === 'undefined' ||\n      extraGlobals.ShadyCSS.nativeShadow ||\n      extraGlobals.ShadyCSS.ScopingShim === undefined\n    ) {\n      this.skip();\n      return;\n    }\n  });\n\n  test('scoped styles are applied for non-TemplateResult values', function () {\n    const container = document.createElement('scope-1');\n    extraGlobals.ShadyCSS!.ScopingShim!.prepareAdoptedCssText(\n      [':host { border-top: 2px solid black; }'],\n      'scope-1'\n    );\n    document.body.appendChild(container);\n    renderShadowRoot(undefined, container);\n    assert.equal(\n      getComputedStyle(container).getPropertyValue('border-top-width').trim(),\n      '2px'\n    );\n    document.body.removeChild(container);\n  });\n\n  test('adopted CSS remains when rendering a TemplateResult after an initial non-TemplateResult', function () {\n    const container = document.createElement('scope-2');\n    extraGlobals.ShadyCSS!.ScopingShim!.prepareAdoptedCssText(\n      [':host { border-top: 2px solid black; } button { font-size: 7px; } '],\n      'scope-2'\n    );\n    document.body.appendChild(container);\n    renderShadowRoot(undefined, container);\n    assert.equal(\n      getComputedStyle(container).getPropertyValue('border-top-width').trim(),\n      '2px'\n    );\n    renderShadowRoot(html`<button>This is a button.</button>`, container);\n    assert.equal(\n      getComputedStyle(container).getPropertyValue('border-top-width').trim(),\n      '2px'\n    );\n    assert.equal(\n      getComputedStyle(container.shadowRoot!.querySelector('button')!)\n        .getPropertyValue('font-size')\n        .trim(),\n      '7px'\n    );\n    document.body.removeChild(container);\n  });\n\n  // TODO(sorvell): No longer supported. Only styles in TemplateResults are\n  // identified.\n  test.skip('Styles inserted in the initial render through ChildParts are scoped.', function () {\n    const style = document.createElement('style');\n    style.innerHTML =\n      ':host { border-top: 2px solid black; } button { font-size: 7px; }';\n    const container = document.createElement('scope-3');\n    document.body.appendChild(container);\n    renderShadowRoot(\n      html`${style}<button>This is a button.</button>`,\n      container\n    );\n    assert.equal(\n      getComputedStyle(container).getPropertyValue('border-top-width').trim(),\n      '2px'\n    );\n    assert.equal(\n      getComputedStyle(container.shadowRoot!.querySelector('button')!)\n        .getPropertyValue('font-size')\n        .trim(),\n      '7px'\n    );\n    document.body.removeChild(container);\n  });\n});\n"]}