import{noChange as i}from"./lit-html.js";import{isSingleExpression as t}from"./directive-helpers.js";import{Directive as s,PartType as e}from"./directive.js";export{directive}from"./directive.js";
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r=(i,t)=>{var s,e;const o=i.ΞN;if(void 0===o)return!1;for(const i of o)null===(e=(s=i).ΞO)||void 0===e||e.call(s,t,!1),r(i,t);return!0},o=i=>{let t,s;do{if(void 0===(t=i.ΞM))break;s=t.ΞN,s.delete(i),i=t}while(0===(null==s?void 0:s.size))},h=i=>{for(let t;t=i.ΞM;i=t){let s=t.ΞN;if(void 0===s)t.ΞN=s=new Set;else if(s.has(i))break;s.add(i),d(t)}};function n(i){void 0!==this.ΞN?(o(this),this.ΞM=i,h(this)):this.ΞM=i}function l(i,t=!1,s=0){const e=this.ΞH,h=this.ΞN;if(void 0!==h&&0!==h.size)if(t)if(Array.isArray(e))for(let i=s;i<e.length;i++)r(e[i],!1),o(e[i]);else null!=e&&(r(e,!1),o(e));else r(this,i)}const d=i=>{var t,s,r,o;i.type==e.CHILD&&(null!==(t=(r=i).ΞP)&&void 0!==t||(r.ΞP=l),null!==(s=(o=i).ΞQ)&&void 0!==s||(o.ΞQ=n))};class c extends s{constructor(){super(...arguments),this.isConnected=!0,this.G=i,this.ΞN=void 0}ΞT(i,t,s){super.ΞT(i,t,s),h(this)}ΞO(i,t=!0){this.K(i),t&&(r(this,i),o(this))}K(t){var s,e;t!==this.isConnected&&(t?(this.isConnected=!0,this.G!==i&&(this.setValue(this.G),this.G=i),null===(s=this.reconnected)||void 0===s||s.call(this)):(this.isConnected=!1,null===(e=this.disconnected)||void 0===e||e.call(this)))}ΞS(i,t){if(!this.isConnected)throw Error(`AsyncDirective ${this.constructor.name} was rendered while its tree was disconnected.`);return super.ΞS(i,t)}setValue(i){if(this.isConnected)if(t(this.ΣB))this.ΣB.ΞI(i,this);else{const t=[...this.ΣB.ΞH];t[this.ΣF]=i,this.ΣB.ΞI(t,this,0)}else this.G=i}disconnected(){}reconnected(){}}export{c as AsyncDirective};
//# sourceMappingURL=async-directive.js.map
